import{c as he,g as Mt,_ as Dt,a as we,r as p,b as tn,d as at,e as J,f as nn,h as Ft,i as rn,R as c,m as B,w as A,j as M,u as ue,k as Qe,l as L,n as on,o as Pt,p as _e,q as oe,t as sn,S as Lt,s as At,v as an,x as ln,y as Ue,M as cn,z as un,A as lt,B as dn,C as Bt,D as fn,E as mn,F as hn,G as y,H as q,I as de,J as ke,K as vn,L as gn,N as pn,O as yn,P as bn,Q as Cn,T as En,U as wn,V as xn,W as Wt,X as qt,Y as _n}from"./index-pBOzsuKB.js";import{u as kn,S as ee,P as Sn}from"./pull-to-refresh-gonpTrH0.js";import{g as fe,E as ie,S as Vt}from"./search-baq4ctc1.js";import{b as On,u as Tn}from"./firebaseUserService-CpkNB3yp.js";import{u as Rn,g as ct,a as jn,b as Nn,c as zt,B as se,d as Ze,I as Ge,L as z,F as H}from"./input-AC3NyT7k.js";import{P as Ke,u as In,d as $n}from"./popup-DlgMaGa7.js";var Re,ut;function Xe(){if(ut)return Re;ut=1;function n(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}return Re=n,Re}var je,dt;function Mn(){if(dt)return je;dt=1;var n=typeof he=="object"&&he&&he.Object===Object&&he;return je=n,je}var Ne,ft;function Ht(){if(ft)return Ne;ft=1;var n=Mn(),e=typeof self=="object"&&self&&self.Object===Object&&self,t=n||e||Function("return this")();return Ne=t,Ne}var Ie,mt;function Dn(){if(mt)return Ie;mt=1;var n=Ht(),e=function(){return n.Date.now()};return Ie=e,Ie}var $e,ht;function Fn(){if(ht)return $e;ht=1;var n=/\s/;function e(t){for(var r=t.length;r--&&n.test(t.charAt(r)););return r}return $e=e,$e}var Me,vt;function Pn(){if(vt)return Me;vt=1;var n=Fn(),e=/^\s+/;function t(r){return r&&r.slice(0,n(r)+1).replace(e,"")}return Me=t,Me}var De,gt;function Ut(){if(gt)return De;gt=1;var n=Ht(),e=n.Symbol;return De=e,De}var Fe,pt;function Ln(){if(pt)return Fe;pt=1;var n=Ut(),e=Object.prototype,t=e.hasOwnProperty,r=e.toString,o=n?n.toStringTag:void 0;function s(a){var v=t.call(a,o),f=a[o];try{a[o]=void 0;var d=!0}catch{}var b=r.call(a);return d&&(v?a[o]=f:delete a[o]),b}return Fe=s,Fe}var Pe,yt;function An(){if(yt)return Pe;yt=1;var n=Object.prototype,e=n.toString;function t(r){return e.call(r)}return Pe=t,Pe}var Le,bt;function Bn(){if(bt)return Le;bt=1;var n=Ut(),e=Ln(),t=An(),r="[object Null]",o="[object Undefined]",s=n?n.toStringTag:void 0;function a(v){return v==null?v===void 0?o:r:s&&s in Object(v)?e(v):t(v)}return Le=a,Le}var Ae,Ct;function Wn(){if(Ct)return Ae;Ct=1;function n(e){return e!=null&&typeof e=="object"}return Ae=n,Ae}var Be,Et;function qn(){if(Et)return Be;Et=1;var n=Bn(),e=Wn(),t="[object Symbol]";function r(o){return typeof o=="symbol"||e(o)&&n(o)==t}return Be=r,Be}var We,wt;function Vn(){if(wt)return We;wt=1;var n=Pn(),e=Xe(),t=qn(),r=NaN,o=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,a=/^0o[0-7]+$/i,v=parseInt;function f(d){if(typeof d=="number")return d;if(t(d))return r;if(e(d)){var b=typeof d.valueOf=="function"?d.valueOf():d;d=e(b)?b+"":b}if(typeof d!="string")return d===0?d:+d;d=n(d);var m=s.test(d);return m||a.test(d)?v(d.slice(2),m?2:8):o.test(d)?r:+d}return We=f,We}var qe,xt;function zn(){if(xt)return qe;xt=1;var n=Xe(),e=Dn(),t=Vn(),r="Expected a function",o=Math.max,s=Math.min;function a(v,f,d){var b,m,C,h,g,O,k=0,E=!1,_=!1,i=!0;if(typeof v!="function")throw new TypeError(r);f=t(f)||0,n(d)&&(E=!!d.leading,_="maxWait"in d,C=_?o(t(d.maxWait)||0,f):C,i="trailing"in d?!!d.trailing:i);function l(S){var R=b,U=m;return b=m=void 0,k=S,h=v.apply(U,R),h}function u(S){return k=S,g=setTimeout(j,f),E?l(S):h}function w(S){var R=S-O,U=S-k,ae=f-R;return _?s(ae,C-U):ae}function x(S){var R=S-O,U=S-k;return O===void 0||R>=f||R<0||_&&U>=C}function j(){var S=e();if(x(S))return N(S);g=setTimeout(j,w(S))}function N(S){return g=void 0,i&&b?l(S):(b=m=void 0,h)}function $(){g!==void 0&&clearTimeout(g),k=0,b=O=m=g=void 0}function P(){return g===void 0?h:N(e())}function T(){var S=e(),R=x(S);if(b=arguments,m=this,O=S,R){if(g===void 0)return u(O);if(_)return clearTimeout(g),g=setTimeout(j,f),l(O)}return g===void 0&&(g=setTimeout(j,f)),h}return T.cancel=$,T.flush=P,T}return qe=a,qe}var Ve,_t;function Hn(){if(_t)return Ve;_t=1;var n=zn(),e=Xe(),t="Expected a function";function r(o,s,a){var v=!0,f=!0;if(typeof o!="function")throw new TypeError(t);return e(a)&&(v="leading"in a?!!a.leading:v,f="trailing"in a?!!a.trailing:f),n(o,s,{leading:v,maxWait:s,trailing:f})}return Ve=r,Ve}var Un=Hn();const Gn=Mt(Un);var kt={},St;function Yn(){return St||(St=1,function(){if(typeof window!="object")return;if("IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype){"isIntersecting"in window.IntersectionObserverEntry.prototype||Object.defineProperty(window.IntersectionObserverEntry.prototype,"isIntersecting",{get:function(){return this.intersectionRatio>0}});return}function n(i){try{return i.defaultView&&i.defaultView.frameElement||null}catch{return null}}var e=function(i){for(var l=i,u=n(l);u;)l=u.ownerDocument,u=n(l);return l}(window.document),t=[],r=null,o=null;function s(i){this.time=i.time,this.target=i.target,this.rootBounds=g(i.rootBounds),this.boundingClientRect=g(i.boundingClientRect),this.intersectionRect=g(i.intersectionRect||h()),this.isIntersecting=!!i.intersectionRect;var l=this.boundingClientRect,u=l.width*l.height,w=this.intersectionRect,x=w.width*w.height;u?this.intersectionRatio=Number((x/u).toFixed(4)):this.intersectionRatio=this.isIntersecting?1:0}function a(i,l){var u=l||{};if(typeof i!="function")throw new Error("callback must be a function");if(u.root&&u.root.nodeType!=1&&u.root.nodeType!=9)throw new Error("root must be a Document or Element");this._checkForIntersections=f(this._checkForIntersections.bind(this),this.THROTTLE_TIMEOUT),this._callback=i,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(u.rootMargin),this.thresholds=this._initThresholds(u.threshold),this.root=u.root||null,this.rootMargin=this._rootMarginValues.map(function(w){return w.value+w.unit}).join(" "),this._monitoringDocuments=[],this._monitoringUnsubscribes=[]}a.prototype.THROTTLE_TIMEOUT=100,a.prototype.POLL_INTERVAL=null,a.prototype.USE_MUTATION_OBSERVER=!0,a._setupCrossOriginUpdater=function(){return r||(r=function(i,l){!i||!l?o=h():o=O(i,l),t.forEach(function(u){u._checkForIntersections()})}),r},a._resetCrossOriginUpdater=function(){r=null,o=null},a.prototype.observe=function(i){var l=this._observationTargets.some(function(u){return u.element==i});if(!l){if(!(i&&i.nodeType==1))throw new Error("target must be an Element");this._registerInstance(),this._observationTargets.push({element:i,entry:null}),this._monitorIntersections(i.ownerDocument),this._checkForIntersections()}},a.prototype.unobserve=function(i){this._observationTargets=this._observationTargets.filter(function(l){return l.element!=i}),this._unmonitorIntersections(i.ownerDocument),this._observationTargets.length==0&&this._unregisterInstance()},a.prototype.disconnect=function(){this._observationTargets=[],this._unmonitorAllIntersections(),this._unregisterInstance()},a.prototype.takeRecords=function(){var i=this._queuedEntries.slice();return this._queuedEntries=[],i},a.prototype._initThresholds=function(i){var l=i||[0];return Array.isArray(l)||(l=[l]),l.sort().filter(function(u,w,x){if(typeof u!="number"||isNaN(u)||u<0||u>1)throw new Error("threshold must be a number between 0 and 1 inclusively");return u!==x[w-1]})},a.prototype._parseRootMargin=function(i){var l=i||"0px",u=l.split(/\s+/).map(function(w){var x=/^(-?\d*\.?\d+)(px|%)$/.exec(w);if(!x)throw new Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(x[1]),unit:x[2]}});return u[1]=u[1]||u[0],u[2]=u[2]||u[0],u[3]=u[3]||u[1],u},a.prototype._monitorIntersections=function(i){var l=i.defaultView;if(l&&this._monitoringDocuments.indexOf(i)==-1){var u=this._checkForIntersections,w=null,x=null;this.POLL_INTERVAL?w=l.setInterval(u,this.POLL_INTERVAL):(d(l,"resize",u,!0),d(i,"scroll",u,!0),this.USE_MUTATION_OBSERVER&&"MutationObserver"in l&&(x=new l.MutationObserver(u),x.observe(i,{attributes:!0,childList:!0,characterData:!0,subtree:!0}))),this._monitoringDocuments.push(i),this._monitoringUnsubscribes.push(function(){var $=i.defaultView;$&&(w&&$.clearInterval(w),b($,"resize",u,!0)),b(i,"scroll",u,!0),x&&x.disconnect()});var j=this.root&&(this.root.ownerDocument||this.root)||e;if(i!=j){var N=n(i);N&&this._monitorIntersections(N.ownerDocument)}}},a.prototype._unmonitorIntersections=function(i){var l=this._monitoringDocuments.indexOf(i);if(l!=-1){var u=this.root&&(this.root.ownerDocument||this.root)||e,w=this._observationTargets.some(function(N){var $=N.element.ownerDocument;if($==i)return!0;for(;$&&$!=u;){var P=n($);if($=P&&P.ownerDocument,$==i)return!0}return!1});if(!w){var x=this._monitoringUnsubscribes[l];if(this._monitoringDocuments.splice(l,1),this._monitoringUnsubscribes.splice(l,1),x(),i!=u){var j=n(i);j&&this._unmonitorIntersections(j.ownerDocument)}}}},a.prototype._unmonitorAllIntersections=function(){var i=this._monitoringUnsubscribes.slice(0);this._monitoringDocuments.length=0,this._monitoringUnsubscribes.length=0;for(var l=0;l<i.length;l++)i[l]()},a.prototype._checkForIntersections=function(){if(!(!this.root&&r&&!o)){var i=this._rootIsInDom(),l=i?this._getRootRect():h();this._observationTargets.forEach(function(u){var w=u.element,x=C(w),j=this._rootContainsTarget(w),N=u.entry,$=i&&j&&this._computeTargetAndRootIntersection(w,x,l),P=null;this._rootContainsTarget(w)?(!r||this.root)&&(P=l):P=h();var T=u.entry=new s({time:v(),target:w,boundingClientRect:x,rootBounds:P,intersectionRect:$});N?i&&j?this._hasCrossedThreshold(N,T)&&this._queuedEntries.push(T):N&&N.isIntersecting&&this._queuedEntries.push(T):this._queuedEntries.push(T)},this),this._queuedEntries.length&&this._callback(this.takeRecords(),this)}},a.prototype._computeTargetAndRootIntersection=function(i,l,u){if(window.getComputedStyle(i).display!="none"){for(var w=l,x=E(i),j=!1;!j&&x;){var N=null,$=x.nodeType==1?window.getComputedStyle(x):{};if($.display=="none")return null;if(x==this.root||x.nodeType==9)if(j=!0,x==this.root||x==e)r&&!this.root?!o||o.width==0&&o.height==0?(x=null,N=null,w=null):N=o:N=u;else{var P=E(x),T=P&&C(P),S=P&&this._computeTargetAndRootIntersection(P,T,u);T&&S?(x=P,N=O(T,S)):(x=null,w=null)}else{var R=x.ownerDocument;x!=R.body&&x!=R.documentElement&&$.overflow!="visible"&&(N=C(x))}if(N&&(w=m(N,w)),!w)break;x=x&&E(x)}return w}},a.prototype._getRootRect=function(){var i;if(this.root&&!_(this.root))i=C(this.root);else{var l=_(this.root)?this.root:e,u=l.documentElement,w=l.body;i={top:0,left:0,right:u.clientWidth||w.clientWidth,width:u.clientWidth||w.clientWidth,bottom:u.clientHeight||w.clientHeight,height:u.clientHeight||w.clientHeight}}return this._expandRectByRootMargin(i)},a.prototype._expandRectByRootMargin=function(i){var l=this._rootMarginValues.map(function(w,x){return w.unit=="px"?w.value:w.value*(x%2?i.width:i.height)/100}),u={top:i.top-l[0],right:i.right+l[1],bottom:i.bottom+l[2],left:i.left-l[3]};return u.width=u.right-u.left,u.height=u.bottom-u.top,u},a.prototype._hasCrossedThreshold=function(i,l){var u=i&&i.isIntersecting?i.intersectionRatio||0:-1,w=l.isIntersecting?l.intersectionRatio||0:-1;if(u!==w)for(var x=0;x<this.thresholds.length;x++){var j=this.thresholds[x];if(j==u||j==w||j<u!=j<w)return!0}},a.prototype._rootIsInDom=function(){return!this.root||k(e,this.root)},a.prototype._rootContainsTarget=function(i){var l=this.root&&(this.root.ownerDocument||this.root)||e;return k(l,i)&&(!this.root||l==i.ownerDocument)},a.prototype._registerInstance=function(){t.indexOf(this)<0&&t.push(this)},a.prototype._unregisterInstance=function(){var i=t.indexOf(this);i!=-1&&t.splice(i,1)};function v(){return window.performance&&performance.now&&performance.now()}function f(i,l){var u=null;return function(){u||(u=setTimeout(function(){i(),u=null},l))}}function d(i,l,u,w){typeof i.addEventListener=="function"?i.addEventListener(l,u,w):typeof i.attachEvent=="function"&&i.attachEvent("on"+l,u)}function b(i,l,u,w){typeof i.removeEventListener=="function"?i.removeEventListener(l,u,w):typeof i.detachEvent=="function"&&i.detachEvent("on"+l,u)}function m(i,l){var u=Math.max(i.top,l.top),w=Math.min(i.bottom,l.bottom),x=Math.max(i.left,l.left),j=Math.min(i.right,l.right),N=j-x,$=w-u;return N>=0&&$>=0&&{top:u,bottom:w,left:x,right:j,width:N,height:$}||null}function C(i){var l;try{l=i.getBoundingClientRect()}catch{}return l?(l.width&&l.height||(l={top:l.top,right:l.right,bottom:l.bottom,left:l.left,width:l.right-l.left,height:l.bottom-l.top}),l):h()}function h(){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}function g(i){return!i||"x"in i?i:{top:i.top,y:i.top,bottom:i.bottom,left:i.left,x:i.left,right:i.right,width:i.width,height:i.height}}function O(i,l){var u=l.top-i.top,w=l.left-i.left;return{top:u,left:w,height:l.height,width:l.width,bottom:u+l.height,right:w+l.width}}function k(i,l){for(var u=l;u;){if(u==i)return!0;u=E(u)}return!1}function E(i){var l=i.parentNode;return i.nodeType==9&&i!=e?n(i):(l&&l.assignedSlot&&(l=l.assignedSlot.parentNode),l&&l.nodeType==11&&l.host?l.host:l)}function _(i){return i&&i.nodeType===9}window.IntersectionObserver=a,window.IntersectionObserverEntry=s}()),kt}Yn();function Qn(n,e){var t={},r=t.callback,o=Dt(t,["callback"]),s=we(p.useState(),2),a=s[0],v=s[1],f=we(p.useState(),2),d=f[0],b=f[1];return Rn(function(){var m=Array.isArray(n)?n:[n],C=m.map(function(g){return ct(g)}).filter(Boolean);if(C.length){var h=new IntersectionObserver(function(g){var O,k;try{for(var E=tn(g),_=E.next();!_.done;_=E.next()){var i=_.value;b(i.intersectionRatio),v(i.isIntersecting),r==null||r(i)}}catch(l){O={error:l}}finally{try{_&&!_.done&&(k=E.return)&&k.call(E)}finally{if(O)throw O.error}}},at(at({},o),{root:ct(void 0)}));return C.forEach(function(g){return h.observe(g)}),function(){h.disconnect()}}},[void 0,void 0,r],n),[a,d]}function Zn(n){var e=this,t=p.useRef(!1);return p.useCallback(function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];return J(e,void 0,void 0,function(){var s,a;return nn(this,function(v){switch(v.label){case 0:if(t.current)return[2];t.current=!0,v.label=1;case 1:return v.trys.push([1,3,4,5]),[4,n.apply(void 0,Ft([],we(r),!1))];case 2:return s=v.sent(),[2,s];case 3:throw a=v.sent(),a;case 4:return t.current=!1,[7];case 5:return[2]}})})},[n])}function Gt(n,e){var t,r=jn(n),o=(t=e==null?void 0:e.wait)!==null&&t!==void 0?t:1e3,s=p.useMemo(function(){return Gn(function(){for(var a=[],v=0;v<arguments.length;v++)a[v]=arguments[v];return r.current.apply(r,Ft([],we(a),!1))},o,e)},[]);return Nn(function(){s.cancel()}),{run:s,cancel:s.cancel,flush:s.flush}}function Kn(n){return p.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},n,{style:Object.assign({verticalAlign:"-0.125em"},n.style),className:["antd-mobile-icon",n.className].filter(Boolean).join(" ")}),p.createElement("g",{id:"DownOutline-DownOutline",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},p.createElement("g",null,p.createElement("rect",{id:"DownOutline-矩形",fill:"#FFFFFF",opacity:0,x:0,y:0,width:48,height:48}),p.createElement("path",{d:"M5.11219264,16.3947957 L22.6612572,34.5767382 L22.6612572,34.5767382 C23.2125856,35.1304785 24.0863155,35.1630514 24.6755735,34.6744571 L24.7825775,34.5767382 L42.8834676,16.3956061 C42.9580998,16.320643 43,16.2191697 43,16.1133896 L43,12.9866673 C43,12.7657534 42.8209139,12.5866673 42.6,12.5866673 C42.4936115,12.5866673 42.391606,12.6290496 42.316542,12.7044413 L23.7816937,31.3201933 L23.7816937,31.3201933 L5.6866816,12.7237117 C5.53262122,12.5653818 5.27937888,12.5619207 5.121049,12.7159811 C5.04365775,12.7912854 5,12.8946805 5,13.0026627 L5,16.1170064 C5,16.2206403 5.04022164,16.3202292 5.11219264,16.3947957 Z",id:"DownOutline-down",fill:"currentColor",fillRule:"nonzero"}))))}function Xn(n){return p.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},n,{style:Object.assign({verticalAlign:"-0.125em"},n.style),className:["antd-mobile-icon",n.className].filter(Boolean).join(" ")}),p.createElement("g",{id:"SearchOutline-SearchOutline",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},p.createElement("g",{id:"SearchOutline-编组"},p.createElement("rect",{id:"SearchOutline-矩形",fill:"#FFFFFF",opacity:0,x:0,y:0,width:48,height:48}),p.createElement("path",{d:"M10.2434135,10.1505371 C17.2346315,3.28315429 28.5696354,3.28315429 35.5608534,10.1505371 C42.3159331,16.7859644 42.5440954,27.4048667 36.2453405,34.3093889 L43.7095294,41.6422249 C43.8671196,41.7970419 43.8693677,42.0502979 43.7145508,42.2078881 C43.7128864,42.2095822 43.7112069,42.2112616 43.7095126,42.2129259 L42.1705322,43.7246464 C42.014915,43.8775072 41.7655181,43.8775006 41.6099089,43.7246316 L34.0775268,36.3248916 L34.0775268,36.3248916 C27.0485579,41.8551751 16.7593545,41.4200547 10.2434135,35.0195303 C3.25219551,28.1521474 3.25219551,17.0179199 10.2434135,10.1505371 Z M12.3532001,12.2229532 C6.52718516,17.9457722 6.52718516,27.2242951 12.3532001,32.9471142 C18.1792151,38.6699332 27.6250517,38.6699332 33.4510667,32.9471142 C39.2770817,27.2242951 39.2770817,17.9457722 33.4510667,12.2229532 C27.6250517,6.50013419 18.1792151,6.50013419 12.3532001,12.2229532 Z",id:"SearchOutline-形状",fill:"currentColor",fillRule:"nonzero"}))))}var K={},Ot;function Jn(){if(Ot)return K;Ot=1;var n=K&&K.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(K,"__esModule",{value:!0}),K.staged=void 0;const e=n(rn());function t(s){return typeof s=="function"?e.default.createElement(r,{stage:s}):s}function r(s){const a=s.stage();return t(a)}function o(s){return function(v,f){const d=s(v,f);return t(d)}}return K.staged=o,K}var er=Jn();function ve(n){return typeof n=="number"?`${n}px`:n}const tr=()=>c.createElement("svg",{viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg"},c.createElement("path",{d:"M19.233 6.233 17.42 9.08l-10.817.001a.665.665 0 0 0-.647.562l-.007.096V34.9l5.989-8.707a2.373 2.373 0 0 1 1.801-1.005 2.415 2.415 0 0 1 1.807.625l.126.127 4.182 4.525 2.267-3.292 5.461 7.841-4.065 7.375H6.604c-1.86 0-3.382-1.47-3.482-3.317l-.005-.192V9.744c0-1.872 1.461-3.405 3.296-3.505l.19-.005h12.63Zm22.163 0c1.86 0 3.382 1.472 3.482 3.314l.005.192v29.14a3.507 3.507 0 0 1-3.3 3.505l-.191.006H27.789l3.63-6.587.06-.119a1.87 1.87 0 0 0-.163-1.853l-6.928-9.949 3.047-4.422a2.374 2.374 0 0 1 1.96-1.01 2.4 2.4 0 0 1 1.86.87l.106.14L42.05 34.89V9.74a.664.664 0 0 0-.654-.658H21.855l1.812-2.848h17.73Zm-28.305 5.611c.794 0 1.52.298 2.07.788l-.843 1.325-.067.114a1.87 1.87 0 0 0 .11 1.959l.848 1.217c-.556.515-1.3.83-2.118.83a3.122 3.122 0 0 1-3.117-3.116 3.119 3.119 0 0 1 3.117-3.117Z",fill:"#DBDBDB",fillRule:"nonzero"})),nr=()=>c.createElement("svg",{viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg"},c.createElement("path",{d:"M41.396 6.234c1.923 0 3.487 1.574 3.487 3.505v29.14c0 1.937-1.568 3.51-3.491 3.51H6.604c-1.923 0-3.487-1.573-3.487-3.51V9.745c0-1.936 1.564-3.51 3.487-3.51Zm0 2.847H6.604c-.355 0-.654.3-.654.658V34.9l5.989-8.707a2.373 2.373 0 0 1 1.801-1.005 2.405 2.405 0 0 1 1.933.752l4.182 4.525 7.58-11.005a2.374 2.374 0 0 1 1.96-1.01c.79 0 1.532.38 1.966 1.01L42.05 34.89V9.74a.664.664 0 0 0-.654-.658Zm-28.305 2.763a3.119 3.119 0 0 1 3.117 3.117 3.119 3.119 0 0 1-3.117 3.117 3.122 3.122 0 0 1-3.117-3.117 3.119 3.119 0 0 1 3.117-3.117Z",fill:"#DBDBDB",fillRule:"nonzero"})),rr=n=>{const e=p.useRef(null),[t]=Qn(e);return p.useEffect(()=>{t&&n.onActive()},[t]),c.createElement("div",{ref:e})},xe="adm-image",or={fit:"fill",placeholder:c.createElement("div",{className:`${xe}-tip`},c.createElement(nr,null)),fallback:c.createElement("div",{className:`${xe}-tip`},c.createElement(tr,null)),lazy:!1,draggable:!1},ir=er.staged(n=>{const e=B(or,n),[t,r]=p.useState(!1),[o,s]=p.useState(!1),a=p.useRef(null),v=p.useRef(null);let f=e.src,d=e.srcSet;const[b,m]=p.useState(!e.lazy);f=b?e.src:void 0,d=b?e.srcSet:void 0,zt(()=>{r(!1),s(!1)},[f]),p.useEffect(()=>{var g;!((g=v.current)===null||g===void 0)&&g.complete&&r(!0)},[]);function C(){if(o||f===void 0&&!d)return c.createElement(c.Fragment,null,e.fallback);const g=c.createElement("img",{ref:v,id:e.id,className:`${xe}-img`,src:f,alt:e.alt,onClick:e.onClick,onLoad:O=>{var k;r(!0),(k=e.onLoad)===null||k===void 0||k.call(e,O)},onError:O=>{var k;s(!0),(k=e.onError)===null||k===void 0||k.call(e,O)},style:{objectFit:e.fit,display:t?"block":"none"},crossOrigin:e.crossOrigin,decoding:e.decoding,loading:e.loading,referrerPolicy:e.referrerPolicy,sizes:e.sizes,srcSet:d,useMap:e.useMap,draggable:e.draggable});return c.createElement(c.Fragment,null,!t&&e.placeholder,g)}const h={};return e.width&&(h["--width"]=ve(e.width),h.width=ve(e.width)),e.height&&(h["--height"]=ve(e.height),h.height=ve(e.height)),A(e,c.createElement("div",{ref:a,className:xe,style:h,onClick:e.onContainerClick},e.lazy&&!b&&c.createElement(rr,{onActive:()=>{m(!0)}}),C()))});var Ce={exports:{}},sr=Ce.exports,Tt;function ar(){return Tt||(Tt=1,function(n,e){(function(t,r){n.exports=r()})(sr,function(){var t="day";return function(r,o,s){var a=function(d){return d.add(4-d.isoWeekday(),t)},v=o.prototype;v.isoWeekYear=function(){return a(this).year()},v.isoWeek=function(d){if(!this.$utils().u(d))return this.add(7*(d-this.isoWeek()),t);var b,m,C,h,g=a(this),O=(b=this.isoWeekYear(),m=this.$u,C=(m?s.utc:s)().year(b).startOf("year"),h=4-C.isoWeekday(),C.isoWeekday()>4&&(h+=7),C.add(h,t));return g.diff(O,"week")+1},v.isoWeekday=function(d){return this.$utils().u(d)?this.day()||7:this.day(this.day()%7?d:d-7)};var f=v.startOf;v.startOf=function(d,b){var m=this.$utils(),C=!!m.u(b)||b;return m.p(d)==="isoweek"?C?this.date(this.date()-(this.isoWeekday()-1)).startOf("day"):this.date(this.date()-1-(this.isoWeekday()-1)+7).endOf("day"):f.bind(this)(d,b)}}})}(Ce)),Ce.exports}var lr=ar();const cr=Mt(lr);function Rt(n,e){return n===void 0||e===null?null:Array.isArray(e)?e:[e,e]}function ur(n){return M().year(n.year).month(n.month-1).date(1)}function dr(n){var e=p.useRef();e.current=n;var t=p.useCallback(function(){for(var r,o=arguments.length,s=new Array(o),a=0;a<o;a++)s[a]=arguments[a];return(r=e.current)===null||r===void 0?void 0:r.call.apply(r,[e].concat(s))},[]);return t}Number(p.version.split(".")[0]);function fr(n,e,t){const r=p.useRef(),o=()=>{r.current&&cancelAnimationFrame(r.current)},s=dr(a=>{o(),r.current=requestAnimationFrame(()=>{if(t.current){const v=a.format("YYYY-M"),f=t.current.querySelector(`[data-year-month="${v}"]`);f&&f.scrollIntoView({block:"start",inline:"nearest"})}})});return p.useEffect(()=>{if(e&&n)return s(n),o},[n,e]),s}M.extend(cr);M.extend(on);const F="adm-calendar-picker-view",Yt=c.createContext({visible:!1}),mr={weekStartsOn:"Sunday",defaultValue:null,allowClear:!0,usePopup:!0,selectionMode:"single"},hr=p.forwardRef((n,e)=>{var t;const r=p.useRef(null),o=M(),s=B(mr,n),{locale:a}=ue(),v=[...a.Calendar.markItems];if(s.weekStartsOn==="Sunday"){const T=v.pop();T&&v.unshift(T)}const[f,d]=Qe({value:s.value===void 0?void 0:Rt(s.selectionMode,s.value),defaultValue:Rt(s.selectionMode,s.defaultValue),onChange:T=>{var S,R;s.selectionMode==="single"?(S=s.onChange)===null||S===void 0||S.call(s,T?T[0]:null):s.selectionMode==="range"&&((R=s.onChange)===null||R===void 0||R.call(s,T))}}),[b,m]=p.useState(!1),[C,h]=p.useState(()=>M(f?f[0]:o).date(1)),g=T=>{T&&h(M(T[0]).date(1)),d(T)},O=s.title!==!1,k=p.useContext(Yt),E=fr(C,k.visible,r),[_,i]=p.useState(C),[l,u]=p.useState(()=>C.add(6,"month"));p.useEffect(()=>{if(f){const[T,S]=f;!s.min&&T&&M(T).isBefore(_)&&i(M(T).date(1)),!s.max&&S&&M(S).isAfter(l)&&u(M(S).endOf("month"))}},[f]);const w=p.useMemo(()=>s.max?M(s.max):l,[s.max,l]),x=p.useMemo(()=>s.min?M(s.min):_,[s.min,_]);p.useImperativeHandle(e,()=>({jumpTo:T=>{let S;typeof T=="function"?S=T({year:C.year(),month:C.month()+1}):S=T;const R=ur(S);h(R),E(R)},jumpToToday:()=>{const T=M().date(1);h(T),E(T)},getDateRange:()=>f}));const j=c.createElement("div",{className:`${F}-header`},c.createElement("div",{className:`${F}-title`},(t=s.title)!==null&&t!==void 0?t:a.Calendar.title));function N(){var T;const S=[];let R=x;for(;R.isSameOrBefore(w,"month");){const U=R.year(),ae=R.month()+1,Kt={year:U,month:ae},tt=`${U}-${ae}`,nt=s.weekStartsOn==="Monday"?R.date(1).isoWeekday()-1:R.date(1).isoWeekday(),Xt=nt==7?null:Array(nt).fill(null).map((rt,le)=>c.createElement("div",{key:le,className:`${F}-cell`}));S.push(c.createElement("div",{key:tt,"data-year-month":tt},c.createElement("div",{className:`${F}-title`},(T=a.Calendar.yearAndMonth)===null||T===void 0?void 0:T.replace(/\${(.*?)}/g,(rt,le)=>{var I;return(I=Kt[le])===null||I===void 0?void 0:I.toString()})),c.createElement("div",{className:`${F}-cells`},Xt,Array(R.daysInMonth()).fill(null).map((rt,le)=>{const I=R.date(le+1);let me=!1,te=!1,ne=!1,ot=!1,it=!1;if(f){const[D,W]=f;te=I.isSame(D,"day"),ne=I.isSame(W,"day"),me=te||ne||I.isAfter(D,"day")&&I.isBefore(W,"day"),me&&(ot=(S.length%7===0||I.isSame(I.startOf("month"),"day"))&&!te,it=(S.length%7===6||I.isSame(I.endOf("month"),"day"))&&!ne)}const st=s.shouldDisableDate?s.shouldDisableDate(I.toDate()):w&&I.isAfter(w,"day")||x&&I.isBefore(x,"day"),Jt=()=>{var D;if(s.renderTop===!1)return null;const W=Te=>c.createElement("div",{className:`${F}-cell-top`},Te),G=(D=s.renderTop)===null||D===void 0?void 0:D.call(s,I.toDate());if(G)return W(G);if(s.selectionMode==="range"){if(te&&ne)return W(a.Calendar.startAndEnd);if(te)return W(a.Calendar.start);if(ne)return W(a.Calendar.end)}return I.isSame(o,"day")&&!me?W(a.Calendar.today):W(null)},en=()=>{var D;return s.renderBottom===!1?null:c.createElement("div",{className:`${F}-cell-bottom`},(D=s.renderBottom)===null||D===void 0?void 0:D.call(s,I.toDate()))};return c.createElement("div",{key:I.valueOf(),className:L(`${F}-cell`,{[`${F}-cell-today`]:I.isSame(o,"day"),[`${F}-cell-selected`]:me,[`${F}-cell-selected-begin`]:te,[`${F}-cell-selected-end`]:ne,[`${F}-cell-selected-row-begin`]:ot,[`${F}-cell-selected-row-end`]:it,[`${F}-cell-disabled`]:!!st}),onClick:()=>{if(!s.selectionMode||st)return;const D=I.toDate();function W(){if(!s.allowClear||!f)return!1;const[G,Te]=f;return I.isSame(G,"date")&&I.isSame(Te,"day")}if(s.selectionMode==="single"){if(s.allowClear&&W()){g(null);return}g([D,D])}else if(s.selectionMode==="range"){if(!f){g([D,D]),m(!0);return}if(W()){g(null),m(!1);return}if(b){const G=f[0];g(G>D?[D,G]:[G,D]),m(!1)}else g([D,D]),m(!0)}}},Jt(),c.createElement("div",{className:`${F}-cell-date`},s.renderDate?s.renderDate(I.toDate()):I.date()),en())})))),R=R.add(1,"month")}return S}const $=c.createElement("div",{className:`${F}-body`,ref:r},N()),P=c.createElement("div",{className:`${F}-mark`},v.map((T,S)=>c.createElement("div",{key:S,className:`${F}-mark-cell`},T)));return A(s,c.createElement("div",{className:F},O&&j,P,$))}),ge="adm-divider",vr={contentPosition:"center",direction:"horizontal"},gr=n=>{const e=B(vr,n);return A(e,c.createElement("div",{className:L(ge,`${ge}-${e.direction}`,`${ge}-${e.contentPosition}`)},e.children&&c.createElement("div",{className:`${ge}-content`},e.children)))},pe="adm-calendar-picker",pr={weekStartsOn:"Sunday",defaultValue:null,allowClear:!0,usePopup:!0,selectionMode:"single"},yr=p.forwardRef((n,e)=>{const t=B(pr,n),{locale:r}=ue(),o=e??p.useRef(null),{visible:s,confirmText:a,popupClassName:v,popupStyle:f,popupBodyStyle:d,forceRender:b,closeOnMaskClick:m,onClose:C,onConfirm:h,onMaskClick:g,getContainer:O}=t,k=Dt(t,["visible","confirmText","popupClassName","popupStyle","popupBodyStyle","forceRender","closeOnMaskClick","onClose","onConfirm","onMaskClick","getContainer"]),E=c.useMemo(()=>({visible:!!s}),[s]),_=c.createElement("div",{className:`${pe}-footer`},c.createElement(gr,null),c.createElement("div",{className:`${pe}-footer-bottom`},c.createElement(se,{color:"primary",onClick:()=>{var i,l,u,w;const x=(l=(i=o.current)===null||i===void 0?void 0:i.getDateRange())!==null&&l!==void 0?l:null;t.selectionMode==="single"?(u=t.onConfirm)===null||u===void 0||u.call(t,x?x[0]:null):t.selectionMode==="range"&&((w=t.onConfirm)===null||w===void 0||w.call(t,x)),C==null||C()}},a??r.Calendar.confirm)));return A(t,c.createElement("div",{className:pe},c.createElement(Ke,{visible:s,className:L(`${pe}-popup`,v),showCloseButton:!0,forceRender:e?!0:b,style:f,bodyStyle:Object.assign({borderTopLeftRadius:"8px",borderTopRightRadius:"8px",minHeight:"80vh",overflow:"auto"},d),onClose:C,onMaskClick:()=>{g==null||g(),m&&(C==null||C())},getContainer:O},c.createElement(Yt.Provider,{value:E},c.createElement(hr,Object.assign({ref:o},k))),_)))});function br(n,e){const t=Pt(n);Ze(()=>{const r=e.current;if(r)if(window.ResizeObserver){let o;const s=new ResizeObserver(()=>{o=window.requestAnimationFrame(()=>t(r))});return s.observe(r),()=>{window.cancelAnimationFrame(o),s.disconnect()}}else t(r)},[e])}function Cr(n,e,t){if(n&&typeof MutationObserver<"u"){let r=new MutationObserver(()=>{t()});return r.observe(n,e),()=>{r&&(r.disconnect(),r=null)}}return()=>{}}function Er(n,e,t){const r=Pt(n);p.useEffect(()=>Cr(e.current,t,r),[e])}const wr=(n,e)=>{const[{scrollLeft:t},r]=_e(()=>({scrollLeft:0,config:{tension:300,clamp:!0}}));function o(s=!1){const a=n.current;if(!a||e===void 0)return;const f=a.children.item(e).children.item(0),d=f.offsetLeft,b=f.offsetWidth,m=a.offsetWidth,C=a.scrollWidth,h=a.scrollLeft;if(C-m<=0)return;const O=On(d-(m-b)/2,0,C-m);r.start({scrollLeft:O,from:{scrollLeft:h},immediate:s&&!t.isAnimating})}return Ze(()=>{o(!0)},[]),zt(()=>{o()},[e]),Er(()=>{o(!0)},n,{subtree:!0,childList:!0,characterData:!0}),{scrollLeft:t,animate:o}},ye="adm-scroll-mask",xr=n=>{const e=p.useRef(null),[{leftMaskOpacity:t,rightMaskOpacity:r},o]=_e(()=>({leftMaskOpacity:0,rightMaskOpacity:0,config:{clamp:!0}})),{run:s}=Gt((a=!1)=>{if(!e.current)return;const f=n.scrollTrackRef.current;if(!f)return;const d=f.scrollLeft,b=d>0,m=d+f.offsetWidth<f.scrollWidth;o.start({leftMaskOpacity:b?1:0,rightMaskOpacity:m?1:0,immediate:a})},{wait:100,trailing:!0,leading:!0});return p.useEffect(()=>{s(!0)},[]),p.useEffect(()=>{const a=n.scrollTrackRef.current;if(a)return a.addEventListener("scroll",s),()=>a.removeEventListener("scroll",s)},[]),c.createElement(c.Fragment,null,c.createElement(oe.div,{ref:e,className:L(ye,`${ye}-left`),style:{opacity:t}}),c.createElement(oe.div,{className:L(ye,`${ye}-right`),style:{opacity:r}}))},Y="adm-capsule-tabs",_r=()=>null,kr=n=>{var e;const t=p.useRef(null),r=p.useRef(null),o={};let s=null;const a=[];sn(n.children,(m,C)=>{if(!p.isValidElement(m))return;const h=m.key;if(typeof h!="string")return;C===0&&(s=h);const g=a.push(m);o[h]=g-1});const[v,f]=Qe({value:n.activeKey,defaultValue:(e=n.defaultActiveKey)!==null&&e!==void 0?e:s,onChange:m=>{var C;m!==null&&((C=n.onChange)===null||C===void 0||C.call(n,m))}}),{scrollLeft:d,animate:b}=wr(t,o[v]);return br(()=>{b(!0)},r),A(n,c.createElement("div",{className:Y,ref:r},c.createElement("div",{className:`${Y}-header`},c.createElement(xr,{scrollTrackRef:t}),c.createElement(oe.div,{className:`${Y}-tab-list`,ref:t,scrollLeft:d},a.map(m=>A(m.props,c.createElement("div",{key:m.key,className:`${Y}-tab-wrapper`},c.createElement("div",{onClick:()=>{const{key:C}=m;m.props.disabled||C!=null&&f(C.toString())},className:L(`${Y}-tab`,{[`${Y}-tab-active`]:m.key===v,[`${Y}-tab-disabled`]:m.props.disabled})},m.props.title)))))),a.map(m=>{if(m.props.children===void 0)return null;const C=m.key===v;return c.createElement(Lt,{key:m.key,active:C,forceRender:m.props.forceRender,destroyOnClose:m.props.destroyOnClose},c.createElement("div",{className:`${Y}-content`,style:{display:C?"block":"none"}},m.props.children))})))},ze=At(kr,{Tab:_r}),ce="adm-center-popup",Sr=Object.assign(Object.assign({},$n),{getContainer:null}),Or=n=>{const{popup:e={}}=ue(),t=B(Sr,e,n),r=an(),o=_e({scale:t.visible?1:.8,opacity:t.visible?1:0,config:{mass:1.2,tension:200,friction:25,clamp:!0},onRest:()=>{var m,C;r.current||(a(t.visible),t.visible?(m=t.afterShow)===null||m===void 0||m.call(t):(C=t.afterClose)===null||C===void 0||C.call(t))}}),[s,a]=p.useState(t.visible);Ze(()=>{t.visible&&a(!0)},[t.visible]);const v=p.useRef(null);ln(v,t.disableBodyScroll&&s);const f=In(s&&t.visible),d=c.createElement("div",{className:L(`${ce}-body`,t.bodyClassName),style:t.bodyStyle},t.children),b=Ue(t.stopPropagation,A(t,c.createElement("div",{className:ce,style:{display:s?void 0:"none",pointerEvents:s?void 0:"none"}},t.mask&&c.createElement(cn,{visible:f,forceRender:t.forceRender,destroyOnClose:t.destroyOnClose,onMaskClick:m=>{var C,h;(C=t.onMaskClick)===null||C===void 0||C.call(t,m),t.closeOnMaskClick&&((h=t.onClose)===null||h===void 0||h.call(t))},style:t.maskStyle,className:L(`${ce}-mask`,t.maskClassName),disableBodyScroll:!1,stopPropagation:t.stopPropagation}),c.createElement("div",{className:`${ce}-wrap`,role:t.role,"aria-label":t["aria-label"]},c.createElement(oe.div,{style:Object.assign(Object.assign({},o),{pointerEvents:o.opacity.to(m=>m===1?"unset":"none")}),ref:v},t.showCloseButton&&c.createElement("a",{className:L(`${ce}-close`,"adm-plain-anchor"),onClick:()=>{var m;(m=t.onClose)===null||m===void 0||m.call(t)}},t.closeIcon),d)))));return c.createElement(Lt,{active:s,forceRender:t.forceRender,destroyOnClose:t.destroyOnClose},un(t.getContainer,b))},Tr=n=>{const{action:e}=n;return A(n.action,c.createElement(se,{key:e.key,onClick:n.onAction,className:L("adm-dialog-button",{"adm-dialog-button-bold":e.bold}),fill:"none",shape:"rectangular",block:!0,color:e.danger?"danger":"primary",loading:"auto",disabled:e.disabled},e.text))},Rr={actions:[],closeOnAction:!1,closeOnMaskClick:!1,getContainer:null},Qt=n=>{const e=B(Rr,n),t=c.createElement(c.Fragment,null,!!e.image&&c.createElement("div",{className:V("image-container")},c.createElement(ir,{src:e.image,alt:"dialog header image",width:"100%"})),!!e.header&&c.createElement("div",{className:V("header")},c.createElement(lt,null,e.header)),!!e.title&&c.createElement("div",{className:V("title")},e.title),c.createElement("div",{className:L(V("content"),!e.content&&V("content-empty"))},typeof e.content=="string"?c.createElement(lt,null,e.content):e.content),c.createElement("div",{className:V("footer")},e.actions.map((r,o)=>{const s=Array.isArray(r)?r:[r];return c.createElement("div",{className:V("action-row"),key:o},s.map((a,v)=>c.createElement(Tr,{key:a.key,action:a,onAction:()=>J(void 0,void 0,void 0,function*(){var f,d,b;yield Promise.all([(f=a.onClick)===null||f===void 0?void 0:f.call(a),(d=e.onAction)===null||d===void 0?void 0:d.call(e,a,v)]),e.closeOnAction&&((b=e.onClose)===null||b===void 0||b.call(e))})})))})));return c.createElement(Or,{className:L(V(),e.className),style:e.style,afterClose:e.afterClose,afterShow:e.afterShow,onMaskClick:e.closeOnMaskClick?()=>{var r;(r=e.onClose)===null||r===void 0||r.call(e)}:void 0,visible:e.visible,getContainer:e.getContainer,bodyStyle:e.bodyStyle,bodyClassName:L(V("body"),e.image&&V("with-image"),e.bodyClassName),maskStyle:e.maskStyle,maskClassName:e.maskClassName,stopPropagation:e.stopPropagation,disableBodyScroll:e.disableBodyScroll,destroyOnClose:e.destroyOnClose,forceRender:e.forceRender,role:"dialog","aria-label":e["aria-label"]},t)};function V(n=""){return"adm-dialog"+(n&&"-")+n}const Ye=new Set;function Je(n){const e=dn(c.createElement(Qt,Object.assign({},n,{afterClose:()=>{var t;Ye.delete(e.close),(t=n.afterClose)===null||t===void 0||t.call(n)}})));return Ye.add(e.close),e}function jr(n){const e={confirmText:Bt().locale.Dialog.ok},t=B(e,n);return new Promise(r=>{Je(Object.assign(Object.assign({},t),{closeOnAction:!0,actions:[{key:"confirm",text:t.confirmText}],onAction:t.onConfirm,onClose:()=>{var o;(o=t.onClose)===null||o===void 0||o.call(t),r()}}))})}const Nr={confirmText:"确认",cancelText:"取消"};function Ir(n){const{locale:e}=Bt(),t=B(Nr,{confirmText:e.common.confirm,cancelText:e.common.cancel},n);return new Promise(r=>{Je(Object.assign(Object.assign({},t),{closeOnAction:!0,onClose:()=>{var o;(o=t.onClose)===null||o===void 0||o.call(t),r(!1)},actions:[[{key:"cancel",text:t.cancelText,onClick:()=>J(this,void 0,void 0,function*(){var o;yield(o=t.onCancel)===null||o===void 0?void 0:o.call(t),r(!1)})},{key:"confirm",text:t.confirmText,bold:!0,onClick:()=>J(this,void 0,void 0,function*(){var o;yield(o=t.onConfirm)===null||o===void 0?void 0:o.call(t),r(!0)})}]]}))})}function $r(){Ye.forEach(n=>{n()})}const Mr=At(Qt,{show:Je,alert:jr,confirm:Ir,clear:$r});function Dr(n,e){return n.reduce((t,r)=>Math.abs(t-e)<Math.abs(r-e)?t:r)}const X="adm-space",Fr={direction:"horizontal"},Pr=n=>{const e=B(Fr,n),{direction:t,onClick:r}=e;return A(e,c.createElement("div",{className:L(X,{[`${X}-wrap`]:e.wrap,[`${X}-block`]:e.block,[`${X}-${t}`]:!0,[`${X}-align-${e.align}`]:!!e.align,[`${X}-justify-${e.justify}`]:!!e.justify}),onClick:r},c.Children.map(e.children,o=>o!=null&&c.createElement("div",{className:`${X}-item`},o))))};function Lr(n){return n===window}const Zt="adm-infinite-scroll",Ar={threshold:250,children:(n,e,t)=>c.createElement(Wr,{hasMore:n,failed:e,retry:t})},Br=n=>{const e=B(Ar,n),[t,r]=p.useState(!1),o=Zn(h=>J(void 0,void 0,void 0,function*(){try{yield e.loadMore(h)}catch(g){throw r(!0),g}})),s=p.useRef(null),[a,v]=p.useState({}),f=p.useRef(a),[d,b]=p.useState(),{run:m}=Gt(()=>J(void 0,void 0,void 0,function*(){if(f.current!==a||!e.hasMore)return;const h=s.current;if(!h||!h.offsetParent)return;const g=fn(h);if(b(g),!g)return;const k=h.getBoundingClientRect().top;if((Lr(g)?window.innerHeight:g.getBoundingClientRect().bottom)>=k-e.threshold){const _={};f.current=_;try{yield o(!1),v(_)}catch{}}}),{wait:100,leading:!0,trailing:!0});p.useEffect(()=>{m()}),p.useEffect(()=>{if(!s.current||!d)return;function g(){m()}return d.addEventListener("scroll",g),()=>{d.removeEventListener("scroll",g)}},[d]);function C(){return J(this,void 0,void 0,function*(){r(!1);try{yield o(!0),v(f.current)}catch{}})}return A(e,c.createElement("div",{className:Zt,ref:s},typeof e.children=="function"?e.children(e.hasMore,t,C):e.children))},Wr=n=>{const{locale:e}=ue();return n.hasMore?n.failed?c.createElement("span",null,c.createElement("span",{className:`${Zt}-failed-text`},e.InfiniteScroll.failedToLoad),c.createElement("a",{onClick:()=>{n.retry()}},e.InfiniteScroll.retry)):c.createElement(c.Fragment,null,c.createElement("span",null,e.common.loading),c.createElement(mn,null)):c.createElement("span",null,e.InfiniteScroll.noMore)},re="adm-progress-circle",qr=n=>{const e=B({percent:0},n),t={"--percent":e.percent.toString()};return A(e,c.createElement("div",{className:`${re}`,style:t},c.createElement("div",{className:`${re}-content`},c.createElement("svg",{className:`${re}-svg`},c.createElement("circle",{className:`${re}-track`,fill:"transparent"}),c.createElement("circle",{className:`${re}-fill`,fill:"transparent"})),c.createElement("div",{className:`${re}-info`},e.children))))},Q="adm-search-bar",Vr={clearable:!0,onlyShowClearWhenFocus:!1,showCancelButton:!1,defaultValue:"",clearOnCancel:!0},zr=p.forwardRef((n,e)=>{const{locale:t,searchBar:r={}}=ue(),o=B(Vr,r,{cancelText:t.common.cancel},n),s=hn(c.createElement(Xn,null),r.searchIcon,n.icon,n.searchIcon),[a,v]=Qe(o),[f,d]=p.useState(!1),b=p.useRef(null),m=p.useRef(!1);p.useImperativeHandle(e,()=>({clear:()=>{var h;return(h=b.current)===null||h===void 0?void 0:h.clear()},focus:()=>{var h;return(h=b.current)===null||h===void 0?void 0:h.focus()},blur:()=>{var h;return(h=b.current)===null||h===void 0?void 0:h.blur()},get nativeElement(){var h,g;return(g=(h=b.current)===null||h===void 0?void 0:h.nativeElement)!==null&&g!==void 0?g:null}}));const C=()=>{let h;return typeof o.showCancelButton=="function"?h=o.showCancelButton(f,a):h=o.showCancelButton&&f,h&&c.createElement("div",{className:`${Q}-suffix`},c.createElement(se,{fill:"none",className:`${Q}-cancel-button`,onClick:()=>{var g,O,k;o.clearOnCancel&&((g=b.current)===null||g===void 0||g.clear()),(O=b.current)===null||O===void 0||O.blur(),(k=o.onCancel)===null||k===void 0||k.call(o)},onMouseDown:g=>{g.preventDefault()}},o.cancelText))};return A(o,c.createElement("div",{className:L(Q,{[`${Q}-active`]:f})},c.createElement("div",{className:`${Q}-input-box`},s&&c.createElement("div",{className:`${Q}-input-box-icon`},s),c.createElement(Ge,{ref:b,className:L(`${Q}-input`,{[`${Q}-input-without-icon`]:!s}),value:a,onChange:v,maxLength:o.maxLength,autoFocus:o.autoFocus,placeholder:o.placeholder,clearable:o.clearable,onlyShowClearWhenFocus:o.onlyShowClearWhenFocus,onFocus:h=>{var g;d(!0),(g=o.onFocus)===null||g===void 0||g.call(o,h)},onBlur:h=>{var g;d(!1),(g=o.onBlur)===null||g===void 0||g.call(o,h)},onClear:o.onClear,type:"search",enterKeyHint:"search",onEnterPress:()=>{var h,g;m.current||((h=b.current)===null||h===void 0||h.blur(),(g=o.onSearch)===null||g===void 0||g.call(o,a))},"aria-label":t.SearchBar.name,onCompositionStart:h=>{var g;m.current=!0,(g=o.onCompositionStart)===null||g===void 0||g.call(o,h)},onCompositionEnd:h=>{var g;m.current=!1,(g=o.onCompositionEnd)===null||g===void 0||g.call(o,h)}})),C()))}),Z="adm-swipe-action",Hr={rightActions:[],leftActions:[],closeOnTouchOutside:!0,closeOnAction:!0,stopPropagation:[]},Ur=p.forwardRef((n,e)=>{const t=B(Hr,n),r=p.useRef(null),o=p.useRef(null),s=p.useRef(null);function a(E){const _=E.current;return _?_.offsetWidth:0}function v(){return a(o)}function f(){return a(s)}const[{x:d},b]=_e(()=>({x:0,config:{tension:200,friction:30}}),[]),m=p.useRef(!1),C=p.useRef(null);function h(){var E;(E=C.current)===null||E===void 0||E.call(C),m.current=!1}const g=kn(E=>{var _;if(C.current=E.cancel,!E.intentional||(E.down&&(m.current=!0),!m.current))return;const[i]=E.offset;if(E.last){const l=v(),u=f();let w=i+E.velocity[0]*E.direction[0]*50;i>0?w=Math.max(0,w):i<0?w=Math.min(0,w):w=0;const x=Dr([-u,0,l],w);b.start({x}),x!==0&&((_=n.onActionsReveal)===null||_===void 0||_.call(n,x>0?"left":"right")),window.setTimeout(()=>{m.current=!1})}else b.start({x:i,immediate:!0})},{from:()=>[d.get(),0],bounds:()=>{const E=v();return{left:-f(),right:E}},axis:"x",preventScroll:!0,pointer:{touch:!0},triggerAllEvents:!0}),O=()=>{var E;b.start({x:0}),h(),(E=t.onClose)===null||E===void 0||E.call(t)};p.useImperativeHandle(e,()=>({show:(E="right")=>{var _;E==="right"?b.start({x:-f()}):E==="left"&&b.start({x:v()}),(_=n.onActionsReveal)===null||_===void 0||_.call(n,E)},close:O})),p.useEffect(()=>{if(!t.closeOnTouchOutside)return;function E(_){if(d.get()===0)return;const i=r.current;i&&!i.contains(_.target)&&O()}return document.addEventListener("touchstart",E),()=>{document.removeEventListener("touchstart",E)}},[t.closeOnTouchOutside]);function k(E){var _,i;const l=(_=E.color)!==null&&_!==void 0?_:"light";return c.createElement(se,{key:E.key,className:`${Z}-action-button`,style:{"--background-color":(i=Gr[l])!==null&&i!==void 0?i:l},onClick:u=>{var w,x;t.closeOnAction&&O(),(w=E.onClick)===null||w===void 0||w.call(E,u),(x=t.onAction)===null||x===void 0||x.call(t,E,u)}},E.text)}return A(t,c.createElement("div",Object.assign({className:Z},g(),{ref:r,onClickCapture:E=>{m.current&&(E.stopPropagation(),E.preventDefault())}}),c.createElement(oe.div,{className:`${Z}-track`,style:{x:d}},Ue(t.stopPropagation,c.createElement("div",{className:`${Z}-actions ${Z}-actions-left`,ref:o},t.leftActions.map(k))),c.createElement("div",{className:`${Z}-content`,onClickCapture:E=>{d.goal!==0&&(E.preventDefault(),E.stopPropagation(),O())}},c.createElement(oe.div,{style:{pointerEvents:d.to(E=>E!==0&&d.goal!==0?"none":"auto")}},t.children)),Ue(t.stopPropagation,c.createElement("div",{className:`${Z}-actions ${Z}-actions-right`,ref:s},t.rightActions.map(k))))))}),Gr={light:"var(--adm-color-light)",weak:"var(--adm-color-weak)",primary:"var(--adm-color-primary)",success:"var(--adm-color-success)",warning:"var(--adm-color-warning)",danger:"var(--adm-color-danger)"},Yr="_mainText_ckka5_1",Qr="_secondaryText_ckka5_6",be={mainText:Yr,secondaryText:Qr},Zr="_circle_1b32f_1",Kr="_leftText_1b32f_7",Xr="_kcalText_1b32f_13",He={circle:Zr,leftText:Kr,kcalText:Xr},Jr=()=>y.jsxs(q,{align:"center",children:[y.jsx(ee,{animated:!0,className:He.circle}),y.jsxs(q,{direction:"row",align:"center",gap:8,children:[y.jsx(ee,{animated:!0,className:He.leftText}),y.jsx(ee,{animated:!0,className:He.kcalText})]})]}),Ee=n=>n?`${n} ккал`:"",eo=n=>n?`${n} г`:"",to=(n,e)=>e?Math.floor((n||0)*(e||0)/100):0,Se=(n,e=100)=>n?`${Ee(Math.floor(n))} / ${eo(e)}`:"",Oe=n=>{const e=[];return n!=null&&n.name&&e.push(n.name),e.join(" / ")},no=()=>{const n=de(fe),{data:e,isFetching:t}=Tn(),{data:r,isFetching:o}=ke({dateStart:n.dateStart,dateEnd:n.dateEnd}),s=p.useMemo(()=>!(r!=null&&r.totalCalories)||!(e!=null&&e.calories_limit)?0:Math.floor(r.totalCalories*100/e.calories_limit),[e,r]),a=p.useMemo(()=>{if(!(e!=null&&e.calories_limit))return 0;const f=(e==null?void 0:e.calories_limit)-((r==null?void 0:r.totalCalories)??0);return f<0?0:f},[e,r]),v=p.useMemo(()=>{if(!(e!=null&&e.calories_limit))return 0;const f=((r==null?void 0:r.totalCalories)??0)-(e==null?void 0:e.calories_limit);return f<0?0:f},[e,r]);return t||o?y.jsx(Jr,{}):y.jsxs(q,{align:"center",children:[y.jsxs(qr,{percent:s>100?100:s,style:{"--size":"120px","--track-width":"8px","--fill-color":`var(--adm-color-${s>100?"danger":"primary"})`},children:[y.jsx("div",{className:be.mainText,children:`${s}%`}),y.jsx("div",{className:be.secondaryText,children:Ee(r==null?void 0:r.totalCalories)})]}),y.jsxs(q,{direction:"row",align:"center",gap:8,children:[a>0&&y.jsxs(y.Fragment,{children:[y.jsx("div",{className:be.secondaryText,children:"Осталось"}),y.jsx("div",{children:Ee(a)})]}),v>0&&y.jsxs(y.Fragment,{children:[y.jsx("div",{className:be.secondaryText,children:"Превышение"}),y.jsx("div",{children:Ee(v)})]})]})]})},ro="_date_ihy44_1",oo="_button_ihy44_7",jt={date:ro,button:oo},io=()=>y.jsxs(q,{direction:"row",align:"center",justify:"space-between",children:[y.jsx(ee,{animated:!0,className:jt.date}),y.jsx(ee,{animated:!0,className:jt.button})]}),so="_content_1kmv9_1",ao="_filterForm_1kmv9_5",Nt={content:so,filterForm:ao},lo="_diaryList_tl3x1_1",co={diaryList:lo},uo="_title_11ld0_1",fo="_description_11ld0_7",It={title:uo,description:fo},et=({count:n=5})=>y.jsx(z,{children:Array.from({length:n}).map((e,t)=>y.jsx(z.Item,{children:y.jsxs(q,{direction:"column",gap:8,children:[y.jsx(ee,{animated:!0,className:It.title}),y.jsx(ee,{animated:!0,className:It.description})]})},t))}),mo=n=>{var d;const{onClickItem:e}=n,t=de(fe),{data:r,error:o,isFetching:s}=ke({dateStart:t.dateStart,dateEnd:t.dateEnd}),[a]=vn(),v=b=>{Mr.show({content:"Вы действительно хотите удалить запись в дневнике?",closeOnAction:!0,actions:[[{key:"cancel",text:"Нет"},{key:"delete",text:"Удалить",danger:!0,bold:!0,onClick:()=>f(b)}]]})},f=async b=>{try{await a(b.id).unwrap()}catch(m){console.error(m)}};return s?y.jsx(et,{}):o?y.jsx(ie,{status:"default",description:JSON.stringify(o)}):(d=r==null?void 0:r.entries)!=null&&d.length?y.jsx(z,{className:co.diaryList,children:r.entries.map(b=>y.jsx(Ur,{rightActions:[{key:"delete",text:"Удалить",color:"danger",onClick:()=>v(b)}],children:y.jsx(z.Item,{description:Se(b.calories,b.weight),extra:M(b.date).format("HH:mm"),onClick:()=>e(b),children:Oe(b.product)})},b.id))}):y.jsx(ie,{image:Vt,title:"Дневник пуст",description:""})},ho="_productList_8retd_1",vo={productList:ho},go=gn.enhanceEndpoints({addTagTypes:["product"]}).injectEndpoints({endpoints:n=>({getProducts:n.infiniteQuery({infiniteQueryOptions:{initialPageParam:{page:1,size:20},getNextPageParam:(e,t,r)=>{if(!(e.pageSize*e.page>=e.count))return{...r,page:r.page+1}}},async queryFn({pageParam:e,queryArg:t},r,o,s){try{console.log({queryArg:t,pageParam:e});const a=pn(yn(bn,"product"));return{data:{count:0,page:0,pageCount:0,pageSize:0,content:(await Cn(a)).docs.map(d=>({...d.data(),id:d.id}))}}}catch(a){return console.error(a),{error:{status:"CUSTOM_ERROR",error:a.message||a}}}}})})}),{useGetProductsInfiniteQuery:po}=go,yo=n=>{var a;const{onChange:e}=n,{data:t,error:r,isFetching:o}=En(),s=v=>{e==null||e(v.product,v.weight)};return o?y.jsx(et,{}):r?y.jsx(ie,{status:"default",description:JSON.stringify(r)}):(a=t==null?void 0:t.entries)!=null&&a.length?y.jsx(z,{className:vo.productList,children:t.entries.map(v=>y.jsx(z.Item,{description:Se(v.calories,v.weight),onClick:()=>s(v),children:Oe(v.product)},v.id))}):y.jsx(ie,{status:"busy",title:"Недавних продуктов нет",description:""})},bo="_productList_2dsts_1",Co={productList:bo},Eo=n=>{const{onChange:e}=n,[t,r]=p.useState(""),{data:o,error:s,isFetching:a,isFetchingNextPage:v,hasNextPage:f,fetchNextPage:d}=po({search:t}),b=p.useMemo(()=>{var h;return((h=o==null?void 0:o.pages)==null?void 0:h.reduce((g,O)=>(g=g.concat(O.content??[]),g),[]))??[]},[o]),m=p.useCallback(h=>{e==null||e(h)},[e]),C=async()=>{if(v)return Promise.resolve();await d()};return y.jsxs(q,{direction:"column",fullHeight:!0,gap:16,children:[y.jsx(zr,{placeholder:"Поиск продуктов",autoFocus:!0,onSearch:r,onClear:()=>r("")}),a&&!v?y.jsx(et,{}):s?y.jsx(ie,{status:"default",description:JSON.stringify(s)}):b.length?y.jsxs(z,{className:Co.productList,children:[b.map(h=>{var g;return y.jsx(z.Item,{description:Se((g=h.nutrients)==null?void 0:g.energy),onClick:()=>m(h),children:Oe(h)},h.id)}),y.jsx(Br,{hasMore:f,loadMore:C})]},t):y.jsx(ie,{image:Vt,title:"Выполните поиск",description:""})]})},wo="_formField_17k90_1",xo="_tabsContainer_17k90_19",$t={formField:wo,tabsContainer:xo},_o=n=>{var f;const{value:e,openOnInit:t,onChange:r,onChangeWeight:o}=n,[s,a]=p.useState(!1),v=(d,b)=>{r==null||r(d),o==null||o(b),a(!1)};return p.useEffect(()=>{t&&a(!0)},[]),y.jsxs(y.Fragment,{children:[y.jsx(z,{className:$t.formField,children:y.jsx(z.Item,{description:Se((f=e==null?void 0:e.nutrients)==null?void 0:f.energy),onClick:()=>{a(!0)},children:e?Oe(e):"Выбрать продукт"})}),y.jsx(Ke,{visible:s,destroyOnClose:!0,onMaskClick:()=>a(!1),onClose:()=>a(!1),children:y.jsxs(ze,{className:$t.tabsContainer,children:[y.jsx(ze.Tab,{title:"Недавние",destroyOnClose:!0,children:y.jsx(yo,{onChange:v})},"productLatest"),y.jsx(ze.Tab,{title:"Поиск",destroyOnClose:!0,children:y.jsx(Eo,{onChange:v})},"productSearch")]})})]})},ko=n=>{const{value:e,onChange:t}=n,r=de(fe),[o]=H.useForm(),[s,a]=p.useState(""),[v,{isLoading:f}]=wn(),[d,{isLoading:b}]=xn(),m=p.useCallback(()=>{const k=e?{...e,weight:String(e.weight),date:e.date?new Date(e.date):void 0}:{id:void 0,product:void 0,weight:"",calories:void 0,date:M(r.dateStart).startOf("day").toDate()};o.setFieldsValue(k)},[e,o,r]),C=async()=>{var k;try{const E=o.getFieldsValue(!0),_=M(),i={id:E==null?void 0:E.id,product:E.product,weight:Number(E.weight),calories:E.calories,date:E!=null&&E.id?(k=E.date)==null?void 0:k.toISOString():M(E.date).set("hour",_.hour()).set("minute",_.minute()).set("second",_.second()).set("millisecond",_.millisecond()).toISOString()};await(i.id?d:v)(i).unwrap(),m(),t()}catch(E){console.error(E)}},h=k=>{o.setFieldValue("weight",k??"")},g=()=>{a(o.getFieldValue("weight")),h(void 0)},O=()=>{!o.getFieldValue("weight")&&s&&h(Number(s))};return p.useEffect(()=>{m()},[m]),y.jsxs(H,{form:o,footer:y.jsx(Pr,{block:!0,direction:"vertical",style:{"--gap":"16px"},children:y.jsx(se,{block:!0,type:"submit",color:"primary",size:"large",disabled:f||b,loading:f||b,children:"Сохранить"})}),onFinish:C,children:[y.jsx(H.Header,{children:e!=null&&e.id?"Обновить запись в дневнике":"Добавить в дневник"}),y.jsx(H.Item,{name:"product",label:"Продукт",rules:[{required:!0}],children:y.jsx(_o,{openOnInit:!(e!=null&&e.id),onChangeWeight:h})}),y.jsx(H.Item,{name:"weight",label:"Вес",rules:[{required:!0}],children:y.jsx(Ge,{placeholder:"В граммах",type:"number",onClick:g,onBlur:O})}),y.jsx(H.Subscribe,{to:["weight","product"],children:({weight:k,product:E},_)=>{var l;const i=to(Number(k),(l=E==null?void 0:E.nutrients)==null?void 0:l.energy);return _.setFieldValue("calories",i>0?i:0),y.jsx(H.Item,{label:"Всего калорий",children:y.jsx(Ge,{value:_.getFieldValue("calories"),readOnly:!0})})}})]})},So=n=>{const{isOpen:e,value:t,onClose:r}=n,o=()=>{r()};return y.jsx(Ke,{visible:e,destroyOnClose:!0,onMaskClick:r,children:y.jsx(ko,{value:t,onChange:o})})},Oo="_trigger_g51zl_1",To={trigger:Oo},Ro="DD.MM.YYYY",jo=n=>{const{value:e,onChange:t}=n,[r,o]=p.useState(!1),s=p.useMemo(()=>e?M(e).format(Ro):"Выберите дату",[e]),a=p.useMemo(()=>{if(!e)return;const m=M(e);return m.set("month",m.get("month")-1).startOf("month").toDate()},[e]),v=p.useMemo(()=>{if(!e)return;const m=M(e);return m.set("month",m.get("month")+1).endOf("month").toDate()},[e]),f=p.useCallback(()=>o(!0),[]),d=p.useCallback(()=>o(!1),[]),b=p.useCallback(m=>{t==null||t(m),o(!1)},[t]);return y.jsxs(y.Fragment,{children:[y.jsxs(q,{direction:"row",align:"center",gap:8,onClick:f,className:To.trigger,children:[y.jsx("span",{children:s}),y.jsx(Kn,{fontSize:12})]}),y.jsx(yr,{weekStartsOn:"Monday",selectionMode:"single",confirmText:"Закрыть",popupBodyStyle:{paddingBottom:"env(safe-area-inset-bottom)"},visible:r,value:e,min:a,max:v,onClose:d,onMaskClick:d,onChange:b})]})},No=()=>{const n=Wt(),[e,t]=p.useState(!1),[r,o]=p.useState(),s=de(fe),{isFetching:a}=ke({dateStart:s.dateStart,dateEnd:s.dateEnd}),v=p.useMemo(()=>({...s,date:new Date(s.dateStart)}),[s]),f=p.useCallback(()=>{t(!0)},[]),d=p.useCallback(()=>{t(!1),o(void 0)},[]),b=C=>{o(C),f()},m=C=>{const h={dateStart:C.date.toISOString(),dateEnd:C.date.toISOString()};n(qt(h))};return y.jsxs(q,{className:Nt.content,gap:16,fullWidth:!0,children:[a?y.jsx(io,{}):y.jsxs(q,{direction:"row",align:"center",justify:"space-between",children:[y.jsx(H,{className:Nt.filterForm,initialValues:v,onValuesChange:m,children:y.jsx(H.Item,{name:"date",noStyle:!0,children:y.jsx(jo,{})})}),y.jsx(se,{color:"primary",onClick:()=>f(),children:"Добавить"})]}),y.jsx(mo,{onClickItem:b}),y.jsx(So,{isOpen:e,value:r,onClose:d})]})},Lo=p.memo(()=>{const n=Wt(),e=de(fe),{refetch:t}=ke({dateStart:e.dateStart,dateEnd:e.dateEnd});return p.useEffect(()=>{const r={dateStart:M().toISOString(),dateEnd:M().toISOString()};return n(qt(r)),()=>{n(_n.invalidateTags(["diary"]))}},[n]),y.jsx(Sn,{onRefresh:()=>t(),children:y.jsxs(q,{align:"center",children:[y.jsx(no,{}),y.jsx(No,{})]})})});export{Lo as default};
