import{R as t,a1 as O,r as d,u as S,m as P,l as m,x as R,v as h,p as E,y as w,w as N,M as $,q as B,S as M,z as _}from"./index-pBOzsuKB.js";import{d as b}from"./input-AC3NyT7k.js";import{u as j}from"./pull-to-refresh-gonpTrH0.js";const x={closeOnMaskClick:!1,closeIcon:t.createElement(O,null),destroyOnClose:!1,disableBodyScroll:!0,forceRender:!1,getContainer:()=>document.body,mask:!0,showCloseButton:!1,stopPropagation:["click"],visible:!1};function I(n){const[l,r]=d.useState(n);return b(()=>{r(n)},[n]),l}const i="adm-popup",A=Object.assign(Object.assign({},x),{closeOnSwipe:!1,position:"bottom"}),z=n=>{const{locale:l,popup:r={}}=S(),e=P(A,r,n),v=m(`${i}-body`,e.bodyClassName,`${i}-body-position-${e.position}`),[a,p]=d.useState(e.visible),u=d.useRef(null);R(u,e.disableBodyScroll&&a?"strict":!1),b(()=>{e.visible&&p(!0)},[e.visible]);const C=h(),{percent:f}=E({percent:e.visible?0:100,config:{precision:.1,mass:.4,tension:300,friction:30},onRest:()=>{var o,s;C.current||(p(e.visible),e.visible?(o=e.afterShow)===null||o===void 0||o.call(e):(s=e.afterClose)===null||s===void 0||s.call(e))}}),y=j(({swipe:[,o]})=>{var s;e.closeOnSwipe&&(o===1&&e.position==="bottom"||o===-1&&e.position==="top")&&((s=e.onClose)===null||s===void 0||s.call(e))},{axis:"y",enabled:["top","bottom"].includes(e.position)}),g=I(a&&e.visible),k=w(e.stopPropagation,N(e,t.createElement("div",Object.assign({className:i,onClick:e.onClick,style:{display:a?void 0:"none",touchAction:["top","bottom"].includes(e.position)?"none":"auto"}},y()),e.mask&&t.createElement($,{visible:g,forceRender:e.forceRender,destroyOnClose:e.destroyOnClose,onMaskClick:o=>{var s,c;(s=e.onMaskClick)===null||s===void 0||s.call(e,o),e.closeOnMaskClick&&((c=e.onClose)===null||c===void 0||c.call(e))},className:e.maskClassName,style:e.maskStyle,disableBodyScroll:!1,stopPropagation:e.stopPropagation}),t.createElement(B.div,{className:v,style:Object.assign(Object.assign({},e.bodyStyle),{pointerEvents:f.to(o=>o===0?"unset":"none"),transform:f.to(o=>e.position==="bottom"?`translate(0, ${o}%)`:e.position==="top"?`translate(0, -${o}%)`:e.position==="left"?`translate(-${o}%, 0)`:e.position==="right"?`translate(${o}%, 0)`:"none")}),ref:u},e.showCloseButton&&t.createElement("a",{className:m(`${i}-close-icon`,"adm-plain-anchor"),onClick:()=>{var o;(o=e.onClose)===null||o===void 0||o.call(e)},role:"button","aria-label":l.common.close},e.closeIcon),e.children))));return t.createElement(M,{active:a,forceRender:e.forceRender,destroyOnClose:e.destroyOnClose},_(e.getContainer,k))};export{z as P,x as d,I as u};
