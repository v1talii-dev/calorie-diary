import{a8 as h,L as _,ai as p,aj as E,P as o,a0 as m,ak as S,O as l,N as f,al as U,Q as R}from"./index-pBOzsuKB.js";function v(t,e,r){let i=t;return e!==void 0&&(i=Math.max(t,e)),r!==void 0&&(i=Math.min(i,r)),i}let s=null,n=null;h&&(s=document.createElement("div"),s.className="adm-px-tester",s.style.setProperty("--size","10"),document.body.appendChild(s),n=document.createElement("div"),n.className="adm-px-tester",document.body.appendChild(n));function P(t){return s===null||n===null||s.getBoundingClientRect().height===10?t:(n.style.setProperty("--size",t.toString()),n.getBoundingClientRect().height)}const T=2e3,y=t=>{var e;return{uid:(e=m.currentUser)==null?void 0:e.uid,calories_limit:t==null?void 0:t.calories_limit}},O=_.enhanceEndpoints({addTagTypes:["user_settings"]}).injectEndpoints({endpoints:t=>({getUserSettingsEntry:t.query({async queryFn(e,r,i,C){var d,c;try{const a=f(l(o,"user_settings"),U("uid","==",(d=m.currentUser)==null?void 0:d.uid)),u=(c=(await R(a)).docs)==null?void 0:c[0];if(u){const g=u.data();return{data:{...g,id:u.id,uid:g.uid}}}return{data:{calories_limit:T}}}catch(a){return console.error(a),{error:{status:"CUSTOM_ERROR",error:a.message||a}}}},providesTags:["user_settings"]}),addUserSettingsEntry:t.mutation({async queryFn(e){try{return await S(l(o,"user_settings"),y(e)),{data:void 0}}catch(r){return console.error(r),{error:{status:"CUSTOM_ERROR",error:r}}}},invalidatesTags:["user_settings"]}),editUserSettingsEntry:t.mutation({async queryFn(e){try{return e.id?(await p(E(o,"user_settings",e.id),y(e)),{data:void 0}):Promise.reject()}catch(r){return console.error(r),{error:{status:"CUSTOM_ERROR",error:r}}}},invalidatesTags:["user_settings"]})})}),{useGetUserSettingsEntryQuery:A,useAddUserSettingsEntryMutation:w,useEditUserSettingsEntryMutation:x}=O;export{w as a,v as b,x as c,P as d,A as u};
